<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bio‚ÄëVault | P2P UTC Ledger</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Manifest & Service Worker -->
  <link rel="manifest" href="./manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('Service Worker registered:', reg.scope))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }
  </script>

  <!-- Ethers.js -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.umd/dist/ethers.min.js"></script>

  <style>
    /* ...[all your styles remain unchanged, add this section below for extra visuals]... */
    #explainer, #auditInfo, #faqModal, #onboardingTips {
      background: rgba(255,255,255,0.12);
      margin: 18px auto 10px;
      border-radius: 12px;
      max-width: 650px;
      padding: 18px 30px;
      box-shadow: 0 3px 14px rgba(0,0,0,0.13);
      color: #fff;
      text-align: left;
    }
    #explainer h2, #faqModal h2 { color: #10b981; font-size: 1.4em; }
    #faqModal {
      display: none;
      position: fixed;
      z-index: 99999;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.75);
      justify-content: center; align-items: center;
    }
    #faqContent {
      background: #1e3358;
      color: #fff;
      border-radius: 12px;
      max-width: 450px;
      padding: 28px 22px 20px 22px;
      margin: 60px auto;
      box-shadow: 0 5px 24px rgba(0,0,0,0.25);
    }
    .explainer-icons {
      margin-top: 12px;
      display: flex; gap: 18px;
      font-size: 1.25em; color: #fff;
    }
    .explainer-icons span {
      display: flex; align-items: center; gap: 5px;
      background: #19557a;
      border-radius: 6px;
      padding: 6px 14px;
    }
    #auditInfo {
      font-size: 1.02em;
      color: #e2eafc;
      margin-bottom: 10px;
    }
    #footerLinks {
      margin: 10px 0 0 0;
      font-size: 0.99em;
      color: #b8c8e6;
    }
    #footerLinks a {
      color: #aee1f8;
      margin-right: 15px;
      text-decoration: underline;
      font-weight: 500;
    }
    #onboardingTips {
      background: #184d72;
      font-size: 1.05em;
      margin-top: 8px;
      display: none;
    }
    #onboardingTips .tips-list {
      margin: 6px 0 0 14px;
    }
    /* Responsive for new sections */
    @media (max-width: 480px) {
      #explainer, #auditInfo, #faqContent { padding: 8px 5vw; }
      .explainer-icons { flex-direction: column; gap: 10px; }
    }
  </style>
</head>

<body>
  <!-- Explainer / Hero Section -->
  <div id="explainer">
    <h2>Welcome to BalanceChain & TVM</h2>
    <p>
      <b>Bio‚ÄëVault is your key to the new world of digital money‚Äîpowered by the BalanceChain protocol and TVM.</b><br>
      <span style="color:#aee1f8;">1 TVM = 1 USD, always. Every coin is backed by real human effort‚Äînot speculation, not mining, not inflation.</span>
    </p>
    <div class="explainer-icons">
      <span>üåê Pegged & Stable</span>
      <span>üîó Audit-Proof</span>
      <span>ü§ù Human-Effort Backed</span>
      <span>‚ö° Instant & P2P</span>
      <span>üïµÔ∏è‚Äç‚ôÇÔ∏è Privacy-First</span>
    </div>
    <div style="margin-top:10px;">
      <a href="https://shemodelecf.com/whitepaper.pdf" target="_blank" style="color:#10b981;text-decoration:underline;">White Paper</a>
      <a href="#" onclick="document.getElementById('faqModal').style.display='flex';return false;" style="color:#10b981;text-decoration:underline;">FAQ</a>
      <a href="https://t.me/BalanceChainCommunity" target="_blank" style="color:#10b981;text-decoration:underline;">Community</a>
      <a href="mailto:support@shemodelecf.com" style="color:#10b981;text-decoration:underline;">Support</a>
      <a href="https://etherscan.io/address/0xYourContract" target="_blank" style="color:#10b981;text-decoration:underline;">Smart Contract</a>
    </div>
  </div>

  <!-- Audit Info Widget (placeholder) -->
  <div id="auditInfo">
    <b>Live Audit:</b>
    All TVM is publicly provable, with zero inflation. <span style="color:#10b981;">Peg: 1 TVM = 1 USD</span>. See <a href="https://etherscan.io/address/0xYourContract" target="_blank" style="color:#aee1f8;">on-chain supply</a> and <a href="https://shemodelecf.com/audit" target="_blank" style="color:#aee1f8;">protocol audit</a>.
  </div>

  <!-- Onboarding/Security Tips (shows on first load or with "Backup Vault" reminder) -->
  <div id="onboardingTips">
    <b>Getting Started Tips:</b>
    <ul class="tips-list">
      <li>üí° <b>Back up your vault!</b> If you lose your device or passphrase, your TVM may be lost forever.</li>
      <li>üîí Your keys, your money. Never share your passphrase or .vault file with anyone.</li>
      <li>üëÅ‚Äçüó® You can always export and verify your audit trail for proof and security.</li>
      <li>ü™ô To access TVM on the blockchain, connect your wallet and bridge via the on-chain gateway.</li>
    </ul>
  </div>

  <!-- FAQ Modal (inline) -->
  <div id="faqModal">
    <div id="faqContent">
      <h2>TVM & BalanceChain FAQ</h2>
      <b>What is TVM?</b><br>
      TVM is a digital coin always pegged to $1, backed by real human effort (Standard Human Effort, SHE).<br><br>
      <b>How is value fixed?</b><br>
      Protocol logic and the on-chain contract enforce 1 TVM = 1 USD‚Äîno exceptions.<br><br>
      <b>Is my money safe?</b><br>
      Only you control your vault and passphrase. Back up often!<br><br>
      <b>How do I get/transfer TVM?</b><br>
      Earn by SHE bonus, receive P2P, or bridge via the smart contract.<br><br>
      <b>Can I prove my balance?</b><br>
      Yes. All transactions are locally auditable and exportable.<br><br>
      <button onclick="document.getElementById('faqModal').style.display='none';">Close</button>
    </div>
  </div>

  <!-- Locked Screen -->
  <div id="lockedScreen">
    <h1>Bio‚ÄëVault</h1>
    <h2>WELCOME TO YOUR VAULT<br>WHERE THE TRUE VALUE OF MONEY IS.</h2>
    <button id="enterVaultBtn">Enter Vault</button>
  </div>

  <!-- Passphrase Modal -->
  <div id="passModal">
    <div class="popup-content">
      <h3 id="passModalTitle">Enter Passphrase</h3>
      <label id="passModalConfirmLabel" for="passModalConfirmInput">Confirm Passphrase:</label><br>
      <input type="password" id="passModalInput" placeholder="Enter passphrase"><br>
      <input type="password" id="passModalConfirmInput" placeholder="Confirm passphrase"><br>
      <button id="passModalCancelBtn">Cancel</button>
      <button id="passModalSaveBtn">Save</button>
    </div>
  </div>

  <!-- Lock / Terminate Vault -->
  <button id="lockVaultBtn" class="hidden">Lock Vault</button>
  <button id="terminateBtn" class="hidden">Terminate Vault</button>

  <!-- Main Vault UI -->
  <div id="vaultUI" class="hidden">
    <!-- Bio-IBAN & Copy -->
    <div class="section">
      <label for="bioibanInput">Your Bio‚ÄëIBAN:</label><br>
      <input type="text" id="bioibanInput" class="input-field" placeholder="BIO..." readonly>
      <button id="copyBioIBANBtn">Copy</button>
    </div>

    <!-- Balances -->
    <div class="section" id="balanceContainer">
      <span id="tvmBalance">Balance: 0 TVM</span><br>
      <span id="usdBalance">Equivalent to 0 USD</span>
    </div>

    <!-- Bio-Line + UTC  -->
    <div class="section" id="bioLineUTCContainer">
      <div id="bioLineText">üîÑ BonusConstant: 0</div>
      <div id="utcTime">UTC Time: ...</div>
    </div>

    <!-- On-Chain Wallet Field -->
    <div class="section">
      <label>On‚ÄëChain Wallet Address:</label><br>
      <input type="text" id="userWalletAddress" class="input-field" placeholder="0xYourWallet...">
      <button id="saveWalletBtn">Save Wallet</button>
      <button id="autoConnectWalletBtn">Auto‚ÄëConnect MetaMask</button>
    </div>

    <!-- Catch In -->
    <div class="section" id="catchInSection">
      <input type="text" id="catchInBioCatch" class="input-field" placeholder="Paste Bio‚ÄëCatch #">
      <input type="number" id="catchInAmount" class="input-field" placeholder="Amount (TVM)">
      <button id="catchInBtn">Catch In</button>
    </div>

    <!-- Catch Out -->
    <div class="section" id="catchOutSection">
      <input type="text" id="receiverBioIBAN" class="input-field" placeholder="Receiver Bio‚ÄëIBAN">
      <input type="number" id="catchOutAmount" class="input-field" placeholder="Amount (TVM)">
      <button id="catchOutBtn">Catch Out</button>
    </div>

    <!-- Transactions -->
    <h3>Transaction History</h3>
    <div class="section">
      <button id="exportBtn">Export Transactions</button>
      <button id="exportBackupBtn">Backup Vault</button>
      <button id="exportFriendlyBtn">Export Friendly Backup</button>
      <br>
      <label>Import .vault:</label>
      <input type="file" id="importVaultFileInput" accept=".vault">
    </div>
    <table id="transactionTable">
      <thead>
        <tr>
          <th>Bio‚ÄëIBAN</th>
          <th>Bio‚ÄëCatch</th>
          <th>Amount (TVM)</th>
          <th>Date/Time</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="transactionBody"></tbody>
    </table>
    <div class="section" id="p2pInfo">
      <span>(Exchange Rate: 1 USD = 12 TVM)</span>
    </div>
  </div>

  <!-- Popup for Bio‚ÄëCatch -->
  <div id="bioCatchPopup" class="popup" aria-modal="true" role="dialog">
    <div class="popup-content">
      <h3>Your Bio‚ÄëCatch Number</h3>
      <p id="bioCatchNumberText"></p>
      <button id="copyBioCatchBtn">Copy Bio‚ÄëCatch</button>
      <button id="closeBioCatchPopup">Close</button>
    </div>
  </div>

  <!-- Footer -->
  <div class="section" id="footer">
    <div id="footerLinks">
      <a href="https://shemodelecf.com/whitepaper.pdf" target="_blank">White Paper</a>
      <a href="#" onclick="document.getElementById('faqModal').style.display='flex';return false;">FAQ</a>
      <a href="mailto:support@shemodelecf.com">Support</a>
      <a href="https://t.me/BalanceChainCommunity" target="_blank">Community</a>
      <a href="https://etherscan.io/address/0xYourContract" target="_blank">Smart Contract</a>
    </div>
    <p style="color:#fff;">By RR.R ‚Äî for Humanity</p>
  </div>

  <!-- main.js (Vault + Gateway logic) -->
  <script type="module" src="main.js"></script>
  <script>
    // Example: Show onboarding tips on first vault creation or until backup is done
    if (!localStorage.getItem('vaultBackedUp')) {
      document.getElementById('onboardingTips').style.display = 'block';
    }
  </script>
</body>
</html>
