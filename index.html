<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://worldtimeapi.org https://etherscan.io;"> <!-- Enhanced CSP -->
  <title>BalanceChain: Digital Money. Redefined.</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png" type="image/png">
  <style> /* Existing inline styles; consider external for larger apps */ </style>
</head>
<body>
  <header>
    <h1>BalanceChain: Digital Money. Redefined.</h1>
    <p>1 TVM = 1 USD. Always. Powered by human effort (SHE: 12 min/USD from avg GDP/capita ~$10k/100yrs, ~2k hours/year â†’ 5 USD/hr). Proven by code.</p>
    <p>Welcome to the only digital value system that can never devalue or inflate your money.</p>
  </header>

  <section aria-label="Features">
    <ul>
      <li>Pegged & Stable (1 TVM = 12 SHE)</li>
      <li>Audit-Proof (Full chain export, limited history)</li>
      <li>Human-Effort Backed (Universal genesis, equal caps)</li>
      <li>Instant, P2P & Private (Bio-Catch with hashed keys)</li>
      <li>Works Offline (Local ledger)</li>
      <li>No Middlemen, No Mining, No Speculation (Chained proofs)</li>
    </ul>
  </section>

  <nav aria-label="Navigation">
    <button onclick="openModal('whitePaperModal')">White Paper</button>
    <button onclick="openModal('faqModal')">FAQ</button>
    <button onclick="openModal('supportModal')">Support</button>
    <button onclick="openModal('communityModal')">Community</button>
    <button onclick="openModal('legalModal')">Legal</button>
    <button onclick="openModal('auditModal')">Audit Peg</button>
    <button id="exportComplianceBtn">Export Compliance Report</button>
  </nav>

  <p id="onboardingTip">Tip: Back up your vault now. If you lose your backup or passphrase, your funds are gone forever. (Encrypted backups with passphrase)</p>

  <!-- Modals with ARIA and tooltips -->
  <div id="onboardingModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <nav class="modal-nav">
        <button onclick="modalNav('onboardingModal', 0)" tabindex="0">Welcome</button>
        <button onclick="modalNav('onboardingModal', 1)">How It Works</button>
        <button onclick="modalNav('onboardingModal', 2)">Security</button>
      </nav>
      <div class="modal-onboarding-page" title="Universal genesis bio-constant for fair start.">
        <h2>Welcome to Bio-Vault</h2>
        <p>Your vault is the worldâ€™s first truly fair, pegged, and audit-proof digital money system.</p>
        <p>1 TVM = 1 USD. Always. Backed by human effort, not speculation.</p>
        <button onclick="modalNav('onboardingModal', 1)">Next â†’</button>
      </div>
      <div class="modal-onboarding-page hidden" title="Chained segments, P2P transfers, on-chain compliance.">
        <h2>How It Works</h2>
        <ul>
          <li>Create your vaultâ€”your keys and proofs are local and private (hashed for privacy).</li>
          <li>Earn and transfer TVM instantlyâ€”no banks, no middlemen (non-reversible, biometric-enforced).</li>
          <li>1 TVM = 12 SHE = 1 USD. Peg never breaks. Audit any time (limited history: last 20 changes).</li>
          <li>Move funds on-chain or to crypto via the TVM smart contract (auto KYC/AML for claims).</li>
        </ul>
        <button onclick="modalNav('onboardingModal', 2)">Next â†’</button>
      </div>
      <div class="modal-onboarding-page hidden" title="Threat model: Device loss (backups), compromise (biometrics), double-spend (proofs).">
        <h2>Security First</h2>
        <ul>
          <li>Backup your vault now. Your passphrase and file = your money. Lose them, lose everything.</li>
          <li>We cannot help you recover funds. Itâ€™s your vault, your keys, your responsibility.</li>
          <li>Keep a copy in a safe place. Never share your passphrase.</li>
        </ul>
        <button onclick="closeModal('onboardingModal')">Got it</button>
      </div>
    </div>
  </div>

  <!-- Other modals similar, with titles for tooltips explaining points -->

  <main id="lockedScreen">
    <h2>Bio-Vault</h2>
    <p>WELCOME TO YOUR VAULT WHERE THE TRUE VALUE OF MONEY IS.</p>
    <button id="enterVaultBtn">Enter Vault</button>
  </main>

  <div id="passModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <h3 id="passModalTitle">Enter Passphrase</h3>
      <label id="passModalConfirmLabel" class="hidden">Confirm Passphrase:</label>
      <input id="passModalConfirmInput" type="password" class="hidden" aria-label="Confirm Passphrase">
      <input id="passModalInput" type="password" aria-label="Passphrase">
      <button id="passModalCancelBtn">Cancel</button>
      <button id="passModalSaveBtn">Save</button>
    </div>
  </div>

  <main id="vaultUI" class="hidden">
    <button id="lockVaultBtn">Lock Vault</button>
    <button id="terminateBtn">Terminate Vault</button>
    <button id="testModeBtn">Test Mode</button>
    <button id="installA2HSBtn">Install App</button>

    <section aria-label="Vault Details">
      <input id="bioibanInput" readonly aria-label="Your Bio-IBAN (hashed for privacy)">
      <button id="copyBioIBANBtn">Copy</button>
      <p id="tvmBalance">Balance: 0 TVM</p>
      <p id="usdBalance">Equivalent: 0 USD</p>
      <p id="segmentStatus">Segments: 0/12000 Unlocked</p>
      <p id="tvmClaimable">TVM Claimable: 0</p>
      <p id="bioLineText">ðŸ”„ Bio-Constant: 0</p>
      <p id="utcTime">UTC Time: ...</p>
      <input id="userWalletAddress" placeholder="On-Chain Wallet (KYC'd for TVM claim)" aria-label="KYC'd Wallet for compliance">
      <button id="saveWalletBtn">Save Wallet</button>
      <button id="autoConnectWalletBtn">Auto-Connect MetaMask</button>
      <button id="claimTVMBtn">Claim TVM Tokens</button>
    </section>

    <section aria-label="Catch In">
      <input id="catchInBioCatch" placeholder="Paste Received Bio-Catch Payload" aria-label="Enter Bio-Catch Payload">
      <button id="catchInBtn">Catch In</button>
    </section>

    <section aria-label="Catch Out">
      <input id="receiverBioIBAN" placeholder="Receiver Bio-IBAN (hashed)" aria-label="Receiver IBAN">
      <input id="catchOutAmount" type="number" placeholder="Amount (segments)" aria-label="Amount to send">
      <button id="catchOutBtn">Catch Out</button>
      <p id="bioCatchSize">Size: 0 MB</p>
      <button id="showBioCatchBtn">Show Bio-Catch</button>
    </section>

    <section aria-label="Transaction History">
      <table id="transactionTable">
        <thead><tr><th>Bio-IBAN</th><th>Bio-Catch</th><th>Proof</th><th>Amount</th><th>Date/Time</th><th>Status</th></tr></thead>
        <tbody id="transactionBody"></tbody>
      </table>
      <p id="txEmptyState">No transactions yet.</p>
      <button id="txPrevBtn">Previous</button>
      <button id="txNextBtn">Next</button>
      <button id="exportBtn">Export Transactions</button>
      <button id="exportBackupBtn">Backup Vault (Encrypted)</button>
      <button id="exportFriendlyBtn">Export Friendly Backup (.vault)</button>
      <input type="file" id="importVaultFileInput" accept=".vault" aria-label="Import .vault file">
    </section>

    <p>(Exchange Rate: 1 USD = 12 SHE = 1 TVM â€” Protocol Pegged. White Paper)</p>
    <p id="auditPegLive"></p>
  </main>

  <div id="bioCatchPopup" class="popup" role="dialog" aria-modal="true">
    <p id="bioCatchNumberText">Your Bio-Catch Number</p>
    <canvas id="qrCodeCanvas" aria-label="QR Code for Bio-Catch"></canvas>
    <p id="bioCatchSize">Size: 0 MB</p>
    <button id="copyBioCatchBtn">Copy Bio-Catch</button>
    <button id="closeBioCatchPopup">Close</button>
  </div>

  <div id="toast" class="toast"></div>

  <footer>By RR.R â€” for Humanity. Â© 2025</footer>

  <script src="main.js"></script>
</body>
</html>
