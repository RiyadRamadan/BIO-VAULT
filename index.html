<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bio‑Vault | BalanceChain — The True Value of Money</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA Manifest & Service Worker -->
  <link rel="manifest" href="./manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('Service Worker registered:', reg.scope))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }
  </script>
  <!-- Ethers.js (UMD build) -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.umd/dist/ethers.min.js"></script>

  <style>
    /* --- [existing styles from your code above, unchanged for brevity] --- */
    /* ... Keep your full original style block here ... */
    /* --- Add the following for FAQ and modals --- */
    #explainerSection, #faqSection, #communitySection, #auditSection {
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 18px 22px;
      margin: 24px auto 12px;
      max-width: 900px;
      text-align: left;
    }
    #explainerSection h2, #faqSection h2, #auditSection h2, #communitySection h2 {
      margin-top: 0;
      color: #e0eaff;
    }
    .faq-q {
      font-weight: bold;
      color: #20d4c8;
      margin-top: 10px;
    }
    .faq-a {
      margin-bottom: 14px;
      color: #fff;
    }
    .notice {
      color: #f8d801;
      font-size: 17px;
      font-weight: 500;
    }
    .external-link {
      color: #67c0ff;
      text-decoration: underline;
      cursor: pointer;
    }
    #onboardingModal {
      display: none;
      position: fixed;
      z-index: 999999;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(22,22,40,0.86);
      justify-content: center; align-items: center;
    }
    #onboardingModal .popup-content {
      background: #fff; color: #000;
      border-radius: 10px; padding: 24px 24px 18px 24px;
      max-width: 460px; width: 93%;
      text-align: left;
    }
    #onboardingModal .close-onboarding {
      float: right; font-size: 18px; color: #2258c4; border: none; background: none; cursor: pointer;
    }
    #auditWidget {
      font-size: 15px;
      color: #96f7ca;
      padding-top: 4px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <!-- Explainer: BalanceChain & TVM -->
  <div id="explainerSection">
    <h2>What is BalanceChain?</h2>
    <div>
      <b>BalanceChain</b> is the breakthrough digital money system where every unit (TVM) is backed by real, provable <b>Standard Human Effort (SHE)</b>.  
      <ul>
        <li>1 TVM = 1 USD, always. No speculation. No volatility.</li>
        <li>Every transfer is audit-proof, instant, and 100% user-controlled.</li>
        <li>Store, send, and convert value — on-chain or off-chain — with total privacy and compliance.</li>
        <li><b>TVM</b> is your gateway: fair, global, and fully human-centric.</li>
      </ul>
    </div>
    <div class="notice">
      <span>TVM is always pegged: <b>1 TVM = 1 USD</b>. Every coin = proof of human work.</span>
    </div>
  </div>

  <!-- Audit/Peg Widget -->
  <div id="auditSection">
    <h2>Audit & Peg</h2>
    <div id="auditWidget">
      <span>Total TVM in existence: <b id="totalTvmSupply">Loading...</b></span> <br>
      <span>Peg status: <b>1 TVM = 1 USD</b> (Protocol-enforced)</span>
      <br>
      <a href="https://etherscan.io/address/0xYourTVMContract" target="_blank" class="external-link">Smart Contract on Etherscan</a>
      &nbsp;|&nbsp;
      <a href="whitepaper.pdf" target="_blank" class="external-link">Read White Paper</a>
    </div>
  </div>

  <!-- FAQ Section -->
  <div id="faqSection">
    <h2>FAQ: Why BalanceChain?</h2>
    <div>
      <div class="faq-q">What makes TVM better than Bitcoin or stablecoins?</div>
      <div class="faq-a">TVM is always pegged to 1 USD by code and cryptography, not by trust or speculation. Every coin is earned or transferred by real, audit-proof human effort (SHE). Zero volatility, zero risk of depeg, and no hidden inflation—ever.</div>

      <div class="faq-q">How does it work?</div>
      <div class="faq-a">You create a vault (in your browser). Your balance and every transaction are cryptographically proven. Send, receive, or bridge to the blockchain instantly and globally. No banks, no middlemen, no fees.</div>

      <div class="faq-q">Is my money safe? What if I lose my device?</div>
      <div class="faq-a">Only you control your vault and backup. Always export your backup and keep it safe—nobody else can access or recover it for you.</div>

      <div class="faq-q">How do I bridge to crypto?</div>
      <div class="faq-a">Link your on-chain wallet and use the TVM smart contract gateway for instant, provable conversion at the pegged rate.</div>
    </div>
  </div>

  <!-- Community & Support -->
  <div id="communitySection">
    <h2>Get Support & Join the Community</h2>
    <p>
      <a href="https://t.me/yourTelegramGroup" target="_blank" class="external-link">Telegram</a> | 
      <a href="mailto:support@shemodel.app" class="external-link">Email</a> | 
      <a href="https://discord.gg/yourdiscord" target="_blank" class="external-link">Discord</a>
    </p>
  </div>

  <!-- Onboarding Modal -->
  <div id="onboardingModal">
    <div class="popup-content">
      <button class="close-onboarding" onclick="document.getElementById('onboardingModal').style.display='none'">&times;</button>
      <h2>Welcome to Your Bio-Vault</h2>
      <ol>
        <li><b>Create</b> your vault. It’s private, runs in your browser—no one else controls your funds.</li>
        <li><b>Backup</b> your vault. Use the “Backup Vault” button below and store your file safely!</li>
        <li><b>Send</b> or <b>receive</b> TVM anywhere—every transfer is audit-proof and instant.</li>
        <li><b>Bridge</b> to crypto with the TVM contract at any time.</li>
      </ol>
      <div class="notice">Never share your backup. Anyone with your vault file has full access to your funds.</div>
    </div>
  </div>

  <!-- Locked Screen -->
  <div id="lockedScreen">
    <h1>Bio‑Vault</h1>
    <h2>WELCOME TO YOUR VAULT<br>WHERE THE TRUE VALUE OF MONEY IS.</h2>
    <button id="enterVaultBtn" onclick="document.getElementById('onboardingModal').style.display='flex'">Enter Vault</button>
  </div>

  <!-- Passphrase Modal (unchanged) -->
  <div id="passModal">
    <div class="popup-content">
      <h3 id="passModalTitle">Enter Passphrase</h3>
      <label id="passModalConfirmLabel" for="passModalConfirmInput">Confirm Passphrase:</label><br>
      <input type="password" id="passModalInput" placeholder="Enter passphrase"><br>
      <input type="password" id="passModalConfirmInput" placeholder="Confirm passphrase"><br>
      <button id="passModalCancelBtn">Cancel</button>
      <button id="passModalSaveBtn">Save</button>
    </div>
  </div>

  <!-- Lock / Terminate Vault (unchanged) -->
  <button id="lockVaultBtn" class="hidden">Lock Vault</button>
  <button id="terminateBtn" class="hidden">Terminate Vault</button>

  <!-- Main Vault UI (unchanged) -->
  <div id="vaultUI" class="hidden">
    <!-- ...your original vaultUI HTML here (unchanged for brevity)... -->
    <!-- Paste your vault, catch in/out, history, etc. blocks here -->
  </div>

  <!-- Bio‑Catch Popup (unchanged) -->
  <div id="bioCatchPopup" class="popup" aria-modal="true" role="dialog">
    <div class="popup-content">
      <h3>Your Bio‑Catch Number</h3>
      <p id="bioCatchNumberText"></p>
      <button id="copyBioCatchBtn">Copy Bio‑Catch</button>
      <button id="closeBioCatchPopup">Close</button>
    </div>
  </div>

  <!-- Footer & Legal -->
  <div class="section" id="footer">
    <p style="color:#fff;">By RR.R — for Humanity<br>
      <a href="terms.html" class="external-link" target="_blank">Terms</a> | 
      <a href="privacy.html" class="external-link" target="_blank">Privacy</a>
    </p>
  </div>

  <script>
    // On first load, show onboarding modal for new users
    window.addEventListener('DOMContentLoaded', function() {
      if (!localStorage.getItem('vaultOnboarded')) {
        document.getElementById('onboardingModal').style.display = 'flex';
        localStorage.setItem('vaultOnboarded', 'yes');
      }
      // Example: set total TVM (should be fetched from backend or contract in production)
      document.getElementById('totalTvmSupply').textContent = 'Loading...'; // TODO: Insert real supply dynamically
    });
  </script>

  <!-- main.js script (Vault + On‑Chain stub) -->
  <script type="module" src="main.js"></script>
</body>
</html>
